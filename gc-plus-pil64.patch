1c1
< # 15jul17abu
---
> # 13may20abu
105c105
<    ld E (EnvIntern)  # Mark current namespace
---
>    ld E (EnvIntern)  # Mark current namespaces
132a133,142
>       ld E (Y (pack III "+(EnvIntern-Env)"))  # Mark saved namespaces
>       call markE
>       ld Y (Y)  # Next frame
>    loop
>    ld Y (EnvCo7)  # Coroutine frames
>    do
>       null Y  # Any?
>    while ne  # Yes
>       ld E (Y (pack III "+(EnvIntern-EnvCo)"))  # Mark saved namespaces
>       call markE
175a186,187
>             ld E (Y (pack -II "-(EnvMid-EnvIntern)"))  # Mark saved namespaces
>             call markE
355,371d366
<          else
<             null (Y -II)  # Active?
<             if nz  # No
<                ld X (Y (pack -II "-(EnvMid-EnvApply)"))  # Saved apply stack
<                do
<                   null X  # End of stack?
<                while ne  # No
<                   ld Z (X)  # Keep end of frame in Z
<                   add X II
<                   do
<                      off (X) 1  # Clear
<                      add X II  # Next gc mark
<                      cmp X Z  # End of frame?
<                   until ge  # Yes
<                   ld X (Z I)  # Next frame
<                loop
<             end
377,389d371
<    ld Y (EnvApply)  # Apply stack
<    do
<       null Y  # End of stack?
<    while ne  # No
<       ld Z (Y)  # Keep end of frame in Z
<       add Y II
<       do
<          off (Y) 1  # Clear
<          add Y II  # Next gc mark
<          cmp Y Z  # End of frame?
<       until ge  # Yes
<       ld Y (Z I)  # Next frame
<    loop
501c483
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
513c495
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
525c507
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
537c519
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (X)  # Set new avail list
549c531
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (Y)  # Set new avail list
561c543
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (Z)  # Set new avail list
577c559
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
593c575
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
609c591
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
625c607
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
641c623
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
657c639
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
673c655
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
689c671
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
705c687
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
721c703
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
737c719
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
753c735
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (X)  # Set new avail list
769c751
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (X)  # Set new avail list
801c783
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (X)  # Set new avail list
817c799
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (Y)  # Set new avail list
833c815
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (Z)  # Set new avail list
850c832
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
867c849
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
881c863
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
893c875
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
905c887
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
917c899
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (X)  # Set new avail list
930c912
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
944c926
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
962c944
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
980c962
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
998c980
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
1015c997
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
1033c1015
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (C)  # Set new avail list
1050c1032
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
1067c1049
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (A)  # Set new avail list
1085c1067
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
1103c1085
<    ld (Avail) 0  # Clear avail list
---
>    ld (Avail) (E)  # Set new avail list
